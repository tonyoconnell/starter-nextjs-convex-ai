# Story 1.1: Monorepo & Tooling Initialization

## Status

Ready for Review

## Story

**As a** developer,  
**I want** a new project initialized with a Bun-based Turborepo and essential DX tooling,  
**so that** I have a clean, consistent, and high-quality starting point for development.

## Acceptance Criteria

1. A new project directory is created and initialized as a Git repository.
2. The project is configured as a Bun-based monorepo using Turborepo.
3. The root `package.json` includes scripts for linting, testing, and formatting.
4. ESLint, Prettier, Husky, and commitlint are configured at the root level.
5. The basic monorepo folder structure (`apps`, `packages`) is created.

## Tasks / Subtasks

- [x] Task 1: Initialize Git repository and project structure (AC: 1, 5)
  - [x] Initialize Git repository in project root
  - [x] Create basic monorepo folder structure: `apps/`, `packages/`
  - [x] Create root `.gitignore` file with appropriate exclusions
- [x] Task 2: Configure Bun-based Turborepo monorepo setup (AC: 2)
  - [x] Initialize Bun package manager (`bun init`)
  - [x] Install and configure Turborepo as build system
  - [x] Create `turbo.json` configuration file
  - [x] Set up proper workspace configuration in root `package.json`
- [x] Task 3: Install and configure development tooling (AC: 3, 4)
  - [x] Install ESLint with TypeScript support
  - [x] Install and configure Prettier for code formatting
  - [x] Install and configure Husky for Git hooks
  - [x] Install and configure commitlint for commit message standards
  - [x] Install lint-staged for pre-commit linting
- [x] Task 4: Create root package.json scripts (AC: 3)
  - [x] Add linting scripts (lint, lint:fix)
  - [x] Add formatting scripts (format, format:check)
  - [x] Add testing scripts (test)
  - [x] Add build scripts using Turborepo
- [x] Task 5: Verify tooling integration and functionality
  - [x] Test ESLint configuration works correctly
  - [x] Test Prettier formatting works correctly
  - [x] Test Husky hooks trigger on commit
  - [x] Test commitlint validates commit messages
  - [x] Verify Turborepo build system functions

## Dev Notes

### Previous Story Insights

No previous story - this is the first story in Epic 1.

### Tech Stack Configuration

Based on architecture documents, the following versions and tools must be used:

- **Bun**: 1.1.x as JS Runtime, Package Manager, and Test Runner [Source: architecture/tech-stack.md]
- **Turborepo**: 2.0.x as High-performance monorepo build system [Source: architecture/tech-stack.md]
- **TypeScript**: 5.4.x for type safety and maintainability [Source: architecture/tech-stack.md]
- **ESLint & Prettier**: Latest versions for code linting and formatting standards [Source: architecture/tech-stack.md]
- **Husky & lint-staged**: Latest versions for Git hooks to run scripts before commits [Source: architecture/tech-stack.md]
- **commitlint**: Latest version to enforce consistent and readable commit message format [Source: architecture/tech-stack.md]

### Project Structure Requirements

The monorepo must follow this exact structure from architecture documentation:

```plaintext
/
├── .github/
│   └── workflows/
├── apps/
│   ├── web/                 # The Next.js frontend application
│   ├── workers/             # Cloudflare Workers for Edge API
│   └── convex/              # Our Convex backend app
├── packages/
│   ├── ui/                  # Our shared, reusable UI component library
│   ├── config/              # Shared configurations (ESLint, TSConfig)
│   ├── data-access/         # Implementation of the Repository Pattern
│   ├── storybook/           # The Storybook environment
│   └── shared-types/        # Shared TypeScript types
└── docs/
├── package.json
├── turbo.json
└── bun.lockb
```

[Source: architecture/source-tree.md]

### Architectural Patterns to Consider

- **Monorepo Structure**: Using Turborepo as the build system [Source: architecture/high-level-architecture.md#repository-structure]
- **Package Manager**: Bun as the exclusive package manager [Source: architecture/high-level-architecture.md#repository-structure]
- **Repository Pattern**: Will be implemented in future stories for data access [Source: architecture/high-level-architecture.md#architectural-patterns]

### File Locations

- Root configuration files: `package.json`, `turbo.json`, `.gitignore` in project root
- ESLint config: `.eslintrc.js` or `eslint.config.js` in project root
- Prettier config: `.prettierrc` in project root
- Husky hooks: `.husky/` directory in project root
- commitlint config: `commitlint.config.js` or in `package.json` in project root

### Coding Standards

The project must follow minimal, strict mandatory rules:

- Enforce strict TypeScript configuration
- No direct `process.env` access (will be relevant in later stories)
- Repository pattern enforcement (will be implemented in later stories)
- No-any TypeScript policy
  [Source: architecture/coding-standards.md]

### Testing Requirements

From testing strategy, the following requirements apply:

- Jest/RTL integration for unit tests
- 90% coverage requirement on shared packages (will apply to future packages)
- Integration with CI/CD pipeline (will be implemented in later stories)
  [Source: architecture/test-strategy-and-standards.md]

### Technical Constraints

- Must use TypeScript 5.4.x with strict mode enabled
- All tooling must be compatible with Bun package manager
- Configuration must support the full tech stack including Next.js, Convex, Cloudflare Workers

## Testing

### Testing Standards

Based on architecture documentation:

- **Test Framework**: Jest with React Testing Library (RTL) for unit and integration testing [Source: architecture/test-strategy-and-standards.md]
- **Test Coverage**: 90% coverage requirement will apply to shared packages created in future stories [Source: architecture/test-strategy-and-standards.md]
- **Test Integration**: All tests must be integrated into CI/CD pipeline (will be implemented in story 1.6) [Source: architecture/test-strategy-and-standards.md]

For this foundational story, testing involves:

- Verify tooling configurations work correctly
- Test that linting, formatting, and commit hooks function as expected
- Validate that the Turborepo build system is properly configured

## Change Log

| Date       | Version | Description            | Author             |
| ---------- | ------- | ---------------------- | ------------------ |
| 2025-07-16 | 1.0     | Initial story creation | Story Manager (SM) |

## Dev Agent Record

_This section will be populated by the development agent during implementation_

### Agent Model Used

Claude Sonnet 4 (claude-sonnet-4-20250514)

### Debug Log References

_To be filled by dev agent_

### Completion Notes List

- ✅ Successfully initialized Bun-based monorepo with Turborepo 2.5.4
- ✅ Created complete project structure with apps/ and packages/ directories
- ✅ Configured all development tooling (ESLint, Prettier, Husky, commitlint, lint-staged)
- ✅ All tools tested and verified working correctly
- ✅ Package.json configured with proper scripts and workspace definitions
- ✅ Git hooks properly configured for pre-commit linting and commit message validation
- ✅ Fixed ESLint configuration for Node.js globals and eliminated all warnings
- ✅ Applied Prettier formatting to all created configuration files
- ✅ All validations pass successfully - story ready for QA review

### File List

**Created/Modified Files:**

- `package.json` - Root monorepo configuration with scripts and dependencies
- `turbo.json` - Turborepo build system configuration
- `eslint.config.js` - ESLint configuration with TypeScript support
- `.prettierrc` - Prettier formatting configuration
- `commitlint.config.js` - Commitlint conventional commit configuration
- `.husky/pre-commit` - Pre-commit hook for lint-staged
- `.husky/commit-msg` - Commit message validation hook
- `index.ts` - Updated sample file demonstrating proper linting
- **Directories Created:**
  - `apps/web/`, `apps/workers/`, `apps/convex/`
  - `packages/ui/`, `packages/config/`, `packages/data-access/`, `packages/storybook/`, `packages/shared-types/`
  - `.github/workflows/`

## QA Results

_This section will be populated by the QA Agent after story completion_
